#include <adc.h>
        #include <ADuC847.h>       
        #include <math.h>

float R_T[112]={
32739.7757
31109.2160
29569.4659
28114.9740
26740.5568
25441.3720
24212.8951
23050.8965
21951.4211
20910.7688
19925.4776
18992.3062
18108.2196
17270.3747
16476.1073
15722.9198
15008.4705
14330.5624
13687.1344
13076.2515
12496.0971
11944.9647
11421.2511
10923.4495
10450.1432
10000.0000
9571.7664
9164.2631
8776.3798
8407.0710
8055.3522
7720.2955
7401.0266
7096.7213
6806.6022
6529.9361
6266.0311
6014.2344
5773.9294
5544.5339
5433.7541
5219.7014
5015.2396
4819.8912
4633.2047
4454.7532
4284.1325
4120.9605
3964.8752
3815.5341
3672.6126
3535.8034
3404.8152
3279.3721
3159.2124
3044.0879
2933.7633
2828.0153
2726.6319
2629.4122
2536.1651
2446.7094
2360.8727
2278.4915
2199.4101
2123.4809
2050.5633
1980.5235
1913.2346
1848.5754
1786.4310
1726.6917
1669.2534
1614.0165
1560.8866
1509.7735
1460.5913
1413.2582
1367.6962
1323.8308
1281.5911
1240.9094
1201.7212
1163.9648
1127.5814
1092.5149
1058.7117
1026.1205
994.6924
964.3808
935.1409
920.9094
893.1977
866.4545
840.6417
815.7228
791.6628
768.4285
745.9877
724.3100
703.3660
685.1130
665.0430
644.9730
624.9030
604.8330
584.7980
564.7980
544.7980
524.7980
494.7980
};                                  


float check_tab(float voltage)   //查表函数
{
  float resistance_rage=0;   //
  int i=0;   //下标
  float temperature=0;   //
  resistance_rage=voltage;   //
  for(i=0;i<110;i++)   //阻值符合分度表
  {
    if(resistance_rage<=R_T[i]&&resistance_rage>=R_T[i+1])   //获取下标
      break;   //????
  }
  if(i<109)
  {
    temperature=i/+(R_T[i]-resistance_rage)/(R_T[i]-R_T[i+1]);   //精度0.1
  }
  return temperature;   //返回温度值
}


